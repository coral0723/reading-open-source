# Button 컴포넌트 분석

## 1. 이 컴포넌트의 역할
이 컴포넌트는 HTML `<button>` 요소를 기반으로 한 컴포넌트이며,  
**"행동"**을 담당하는 base-ui의 Button 컴포넌트를 기반으로 하여  
그 위에 **"표현"**을 담당하는 shadcn의 Button 컴포넌트로 UI 레이어를 쌓아올린 구조.

## 2. 구현에서 눈에 띄는 점
### ① 공통 스타일과 스타일 분기의 명확한 분리
`buttonVariants`를 보면 가장 먼저 눈에 띄는 것은 **variant**와 무관한 공통 스타일을 먼저 정의하고 있다는 점이다.  
```
cva(
  "cn-button inline-flex items-center justify-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none group/button select-none",
  { ... }
)
```
이 클래스들은 버튼이 최소한 갖춰야 할 형태와 동작을 정의한다.
- inline-flex 기반 레이아웃
- 아이콘과 텍스트 정렬
- disabled 상태 처리
- 포커스 및 선택 동작 제어  

### ② 명시적인 스타일 분기 정의
그 다음에 나오는 `variants` 설정에서 버튼의 의미와 크기에 따른 스타일 분기를 명시적으로 정의한다.
```
variants: {
  variant: {
    default: "cn-button-variant-default",
    outline: "cn-button-variant-outline",
    ...
  },
  size: {
    sm: "cn-button-size-sm",
    lg: "cn-button-size-lg",
    ...
  }
}
```  
여기서 중요한 점은 클래스들이 해당 파일 내부에서 정의되지 않았다는 것이다.

실제 스타일 구현은 전역 CSS와 같은 별도의 스타일 레이어에 위치하여,  
어떤 상황에서 어떤 스타일을 선택할지를 정의만 하도록 역할을 명확히 했다.

### ③ 이 방식의 장점  
이처럼 공통 규칙과 스타일 분기를 분리한 구조는 다음과 같은 장점을 만든다.
- 컴포넌트 파일에서 CSS 구현 세부사항이 제거됨
- 스타일 변경 시 컴포넌트 로직 수정이 필요 없음
- 디자인 시스템 규칙을 한 곳에서 통제 가능
- 새로운 variant 추가 시 변경 지점이 명확함

## 3. 왜 이렇게 설계했을까?
### ① 디자인 시스템의 '의미'와 '구현'의 분리
shadcn의 버튼 variant는 단순히 색상이나 스타일의 차이가 아니라,  
인터페이스 내에서 버튼이 어떤 역할과 의미를 가지는지를 나타낸다.  

이 의미를 컴포넌트 내부에 스타일 코드로 하나씩 직접 풀어냈다면,  
디자인 규칙이 변경될 때마다 컴포넌트 로직과 스타일을 함께 수정해야 했을 것이다.  

variant를 이름으로만 정의하고 실제 구현은 외부 스타일 레이어로 분리함으로써,  
컴포넌트는 **버튼의 의미를 표현하는 역할**에만 집중할 수 있게끔 했을 것이다.  

### ② 추상화 레이어를 통한 관리 범위의 명확화
스타일의 실제 구현은 외부 레이어에서 담당하고,  
컴포넌트 내부에서는 "어떤 조건에서 어떤 스타일을 사용할 것인가"라는 결정만 남겼다.  

이 구조는 **스타일 코드가 복잡해질 수록 컴포넌트 가독성이 급격히 떨어지는 문제를 방지**하고,  
컴포넌트의 종류가 많은 대규모 프로젝트에서 **디자인 규칙을 일관되게 유지하기 위한 선택**으로 보인다.   

## 4. 내가 만약 직접 만들었다면?
내가 만든 라이브러리의 초기 구현처럼,  
모든 기본 스타일을 컴포넌트 내부에 직접 선언하고,  
사용자가 원한다면 `className`을 통해 스타일을 덮어 씌우는 방식을 택했을 것이다.  

하지만 이 방식은 shadcn처럼 variant로 버튼의 의미와 역할을 표현하는 구조에서는 한계를 금방 드러냈을 것이다.  

variant의 종류가 늘어날 수록 className 조합은 복잡해지고,  
컴포넌트 파일 안에는 스타일과 로직이 뒤섞여 핵심 로직을 한눈에 파악하기 어려줘질 것이다.

결과적으로 유지보수가 어려워지고,  
프로젝트 전체의 디자인 통일성 또한 유지하기 힘들어질 가능성이 크다.  

## 5. 이 코드에서 배운 점
단순해 보이는 버튼 컴포넌트에서도 모든 책임을하나의 파일에 전부 몰아넣지 않고,
컴포넌트에는 **행동과 결정 로직**만 담당하고,  
스타일은 **외부 레이어에서 통합 관리**하도록 분리함으로써  
라이브러리 차원에서 일관된 스타일 규칙을 유지할 수 있는 구조를 알게 되었다.  
